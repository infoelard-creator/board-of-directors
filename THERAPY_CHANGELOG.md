# CHANGELOG: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –°–ª–æ—è –¢–µ—Ä–∞–ø–µ–≤—Ç–∞ –¥–ª—è Clarity Feedback Loop

## 2025-01-06

### ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

**–®–∞–≥ 1: –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏ –ë–î –¥–ª—è –¢–µ—Ä–∞–ø–µ–≤—Ç–∞ –≤ `db.py`**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `therapy_sessions` ‚Äî —Å–µ—Å—Å–∏–∏ –¥–∏–∞–ª–æ–≥–∞ —Å –¢–µ—Ä–∞–ø–µ–≤—Ç–æ–º
  - –•—Ä–∞–Ω–∏—Ç –∏—Å—Ö–æ–¥–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É, —Å—Ç–∞—Ç—É—Å, —Ñ–∏–Ω–∞–ª—å–Ω—É—é –≥–∏–ø–æ—Ç–µ–∑—É
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `therapy_messages` ‚Äî –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è Q&A
  - –î–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞
  - –ü–æ–ª–µ: `message_metadata` (JSON –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `therapy_key_insights` ‚Äî –∫–ª—é—á–µ–≤—ã–µ –∑–Ω–∞–Ω–∏—è
  - –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ "–ë—é–¥–∂–µ—Ç: 50K –†–£–ë"
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (`is_deleted_by_user`)
  - –ü–æ–ª—è: `confidence`, `importance`, `display_order`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `therapy_hypotheses` ‚Äî –≥–∏–ø–æ—Ç–µ–∑—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º
  - –•—Ä–∞–Ω–∏—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏ JSON –≤–∞—Ä–∏–∞–Ω—Ç—ã
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç confidence (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ –±–∞–±–±–ª–∞—Ö –µ—Å–ª–∏ ‚â• 85%)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `db.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã 4 –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ + —Å–≤—è–∑–∏ —Å User
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞: –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω `metadata` –Ω–∞ `message_metadata` (–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–º—è –≤ SQLAlchemy)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ `.env` —á–µ—Ä–µ–∑ `python-dotenv`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `DATABASE_URL`

**–û–∫—Ä—É–∂–µ–Ω–∏–µ:**
- Codespaces –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite (`sqlite:///./test.db`)
- –ù–∞ –ü—Ä–æ–º-—Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL (`postgresql+psycopg2://...`)
- `python-dotenv==1.0.0` —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ DATABASE_URL –∑–∞–≥—Ä—É–∂–µ–Ω–∞: `sqlite:///./test.db`
- ‚úÖ –ë–î –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –í—Å–µ 5 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ

**–ó–∞—á–µ–º:**
–§—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å–µ—Å—Å–∏–∏ –≤ –ë–î. –ì–æ—Ç–æ–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±—ç–∫–µ–Ω–¥ –ª–æ–≥–∏–∫–∏.

---

### üöß –°–õ–ï–î–£–Æ–©–ï–ï

**–®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å `/api/therapy` —ç–Ω–¥–ø–æ–∏–Ω—Ç** (–°–õ–ï–î–£–Æ–©–ï–ï)
- –°–æ–∑–¥–∞—Ç—å `app/routes/therapy.py`
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –¥–∏–∞–ª–æ–≥–∞ —Å –¢–µ—Ä–∞–ø–µ–≤—Ç–æ–º
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–º–ø—Ç –¢–µ—Ä–∞–ø–µ–≤—Ç–∞ –≤ `app/services/prompts.py`
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–∂–∞—Ç–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

### üìã TODO

- [ ] –°–æ–∑–¥–∞—Ç—å `/api/therapy` —ç–Ω–¥–ø–æ–∏–Ω—Ç
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–∂–∞—Ç–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø–µ—Ä–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞ + –∫–ª—é—á–µ–≤—ã–µ –∑–Ω–∞–Ω–∏—è + –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∞–Ω–∞–ª–∏–∑–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∏–Ω—Å–∞–π—Ç–æ–≤ (–í–∞—Ä–∏–∞–Ω—Ç B ‚Äî –Ω–µ—è–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑)
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥: –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º Therapy
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥: –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å Key Insights –∏ Hypotheses
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É Therapy –∏ Board
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ live data
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ –ü—Ä–æ–º-—Å–µ—Ä–≤–µ—Ä

---

### üìù –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –†–ï–®–ï–ù–ò–Ø

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –¢–µ—Ä–∞–ø–µ–≤—Ç–∞ (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤):**
1. –ò–°–•–û–î–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê (–ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
2. –ö–õ–Æ–ß–ï–í–´–ï –ó–ù–ê–ù–ò–Ø (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ importance)
3. –£–î–ê–õ–Å–ù–ù–´–ï –ó–ù–ê–ù–ò–Ø (—Å–∫—Ä—ã—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ "was_deleted_by_user")
4. –ü–û–°–õ–ï–î–ù–ò–ï 10 –°–û–û–ë–©–ï–ù–ò–ô (raw —Ç–µ–∫—Å—Ç)
5. –¢–ï–ö–£–©–ò–ô –û–¢–í–ï–¢ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

**–£–¥–∞–ª–µ–Ω–∏–µ Key Insights:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –±–∞–±–±–ª —Å [‚úï] –∏ –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∑–Ω–∞–Ω–∏–µ
- –¢–µ—Ä–∞–ø–µ–≤—Ç –≤–∏–¥–∏—Ç —É–¥–∞–ª—ë–Ω–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ (–í–∞—Ä–∏–∞–Ω—Ç B)
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –µ–≥–æ –≤–∞–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–µ–ª–∏–∫–∞—Ç–Ω–æ

**–ì–∏–ø–æ—Ç–µ–∑—ã:**
- –¢–µ—Ä–∞–ø–µ–≤—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 5-10 –≥–∏–ø–æ—Ç–µ–∑
- –¢–æ–ª—å–∫–æ –≥–∏–ø–æ—Ç–µ–∑—ã —Å confidence ‚â• 85% –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –±–∞–±–±–ª–∞—Ö
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å –∏ —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –≥–∏–ø–æ—Ç–µ–∑—ã (5-10) –æ—Ç—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ confidence


---

### ‚úÖ –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç /api/therapy –∏ –ø—Ä–æ–º–ø—Ç—ã –¢–µ—Ä–∞–ø–µ–≤—Ç–∞

**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã/–∏–∑–º–µ–Ω–µ–Ω—ã:**
- `app/routes/therapy.py` (12K) ‚Äî –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä –¥–ª—è –¥–∏–∞–ª–æ–≥–∞ —Å –¢–µ—Ä–∞–ø–µ–≤—Ç–æ–º
  - –ö–ª–∞—Å—Å `TherapyRequest` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (session_id –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞)
  - –ö–ª–∞—Å—Å `TherapyResponse` ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ—Ç–≤–µ—Ç–∞ (therapist_message, key_insights, hypotheses, ready_for_board)
  - –§—É–Ω–∫—Ü–∏—è `get_therapy_context()` ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã, –∫–ª—é—á–µ–≤—ã—Ö –∑–Ω–∞–Ω–∏–π, –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/therapy` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
    - –≠—Ç–∞–ø 1: —Å–æ–∑–¥–∞–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ TherapySession
    - –≠—Ç–∞–ø 2: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - –≠—Ç–∞–ø 3: –≤—ã–∑–æ–≤ –¢–µ—Ä–∞–ø–µ–≤—Ç–∞ (—Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
    - –≠—Ç–∞–ø 4: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –¢–µ—Ä–∞–ø–µ–≤—Ç–∞
    - –≠—Ç–∞–ø 5: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–∏–ø–æ—Ç–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º (–í–∞—Ä–∏–∞–Ω—Ç B)
    - –≠—Ç–∞–ø 6: —Å–±–æ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å insights –∏ hypotheses

- `app/services/prompts.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–º–ø—Ç—ã –¢–µ—Ä–∞–ø–µ–≤—Ç–∞
  - `THERAPY_PARAMS` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã LLM –¥–ª—è –¢–µ—Ä–∞–ø–µ–≤—Ç–∞ (temperature 0.7, max_tokens 200)
  - `THERAPY_SYSTEM_PROMPT` ‚Äî –ø—Å–∏—Ö–æ–ª–æ–≥-–±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç (–¥—Ä—É–∂–µ—Å–∫–∏–π —Ç–æ–Ω, 1-2 –≤–æ–ø—Ä–æ—Å–∞, —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–æ–±–ª–µ–º–µ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö)
  - `HYPOTHESIS_GENERATOR_SYSTEM_PROMPT` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä 3-5 –≥–∏–ø–æ—Ç–µ–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –¢–µ—Ä–∞–ø–µ–≤—Ç–∞ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤):
  1. –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ (–ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
  2. –ö–ª—é—á–µ–≤—ã–µ –∑–Ω–∞–Ω–∏—è (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ importance)
  3. –£–¥–∞–ª—ë–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è (—Å–∫—Ä—ã—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –í–∞—Ä–∏–∞–Ω—Ç B)
  4. –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π (raw —Ç–µ–∫—Å—Ç)
  5. –¢–µ–∫—É—â–∏–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–∏–ø–æ—Ç–µ–∑ (–í–∞—Ä–∏–∞–Ω—Ç B):
  - –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: –¢–µ—Ä–∞–ø–µ–≤—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç
  - –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –≥–∏–ø–æ—Ç–µ–∑—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–∞

- –£—Å–ª–æ–≤–∏–µ show hypotheses:
  - –ï—Å–ª–∏ –µ—Å—Ç—å –≥–∏–ø–æ—Ç–µ–∑–∞ —Å confidence ‚â• 85% ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ—ë –≤ –±–∞–±–±–ª–∞—Ö
  - –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –±–∞–±–±–ª "—è —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É—é –≥–∏–ø–æ—Ç–µ–∑—É —Å–∞–º" (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Board —Å –ø—É—Å—Ç—ã–º –ø–æ–ª–µ–º)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –§–∞–π–ª `app/routes/therapy.py` —Å–æ–∑–¥–∞–Ω (12K)
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å Python –≤ `prompts.py` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ –ü—Ä–æ–º–ø—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã)

**TODO –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ:**
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–æ—É—Ç–µ—Ä therapy –≤ main.py
- [ ] –î–æ–±–∞–≤–∏—Ç—å THERAPY_PARAMS –≤ AGENT_PARAMS (–¥–ª—è ask_gigachat)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –ª–æ–∫–∞–ª—å–Ω–æ


---

### ‚úÖ –®–∞–≥ 2.2-2.4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è therapy_router –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `main.py` (—Å—Ç—Ä–æ–∫–∞ 16) ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç therapy_router
- `main.py` (—Å—Ç—Ä–æ–∫–∞ 64) ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω app.include_router(therapy_router)
- `app/routes/__init__.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç therapy_router
- `app/services/prompts.py` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã "therapy" –∏ "therapy_hypothesis_generator" –≤ AGENT_PARAMS

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ therapy_router –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ main.py
- ‚úÖ therapy_router –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ /api/therapy
- ‚úÖ AGENT_PARAMS —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –¢–µ—Ä–∞–ø–µ–≤—Ç–∞
- ‚úÖ –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã (THERAPY_SYSTEM_PROMPT, HYPOTHESIS_GENERATOR_SYSTEM_PROMPT) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –ë—ç–∫–µ–Ω–¥ –¥–ª—è /api/therapy –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤
- ‚è≥ –ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (UI –¥–ª—è —Ä–µ–∂–∏–º–∞ Therapy)
- ‚è≥ –ù—É–∂–Ω–∞ –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å Key Insights –∏ Hypotheses

**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:**
–®–∞–≥ 3: –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º Therapy –∏ –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å

